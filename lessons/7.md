# Mapeando uma _feature_ que utiliza uma lista de valores para _step definitions_

Quando um (ou mais) passo(s) de um arquivo `.feature` possui uma lista de valores para iteraÃ§Ã£o, o arquivo de _step definitions_ deve estar preparado para iterar sobre cada item da lista em um mesmo passo.

Usando o exemplo da aula anterior, terÃ­amos algo como o seguinte.

```js
// cypress/e2e/todo.js

import { Given, When, Then } from '@badeball/cypress-cucumber-preprocessor'

Given('I access an empty TODO list', () => {
  cy.visit('https://example.todo.com')
})

When('I create these TODOs', table => {
  table.raw()[0].forEach(todoItem => {
    cy.get('input#new-todo')
      .clear()
      .type(`${todoItem}{enter}`)
  })
})

Then('Then I see {string} items in the TODO list', numOfItems => {
  cy.get('#todo-item')
    .should('have.length', numOfItems)
    .and('be.visible')
})
```

> ğŸ‘¨â€ğŸ« A funÃ§Ã£o `table.raw()[0]` retorna a primeira linha (`[0]`) da tabela como um _array_, e entÃ£o, faz um _loop_ neste _array_ para criar TODOs.

## ExercÃ­cio ğŸ¯

1. Dentro da pasta `cypress/e2e/hackerstories/lastSearches/`, crie um arquivo chamado `lastSearches.js`
2. Mapeie cada passo do arquivo `cypress/e2e/engagesphere/lastSearches/lastSearches.feature` no arquivo `cypress/e2e/engagesphere/lastSearches/lastSearches.js`, passando uma tabela iterÃ¡vel Ã  funÃ§Ã£o de _callback_ da funÃ§Ã£o `When` e um parÃ¢metro (ğŸ™Š `numOfButtons`) Ã  funÃ§Ã£o de _callback_ da funÃ§Ã£o `Then`
3. Por fim, execute os testes e siga adiante quando os mesmos estiverem passando.

## Mostre ao mundo o que vocÃª aprendeu ğŸŒ

Para mostrar Ã  sua rede profissional o que vocÃª aprendeu nesta aula, publique o seguinte no LinkedIn.

> Estou fazendo o curso "Testes End-to-End com Cypress e Cucumber: Guia Definitivo ğŸ¥’" da escola online Talking About Testing, onde aprendi a definir _step definitions_ com _arrays_ de dados para iteraÃ§Ã£o. #TalkingAboutTesting #EscolaTAT #Cypress #Cucumber
>
> ğŸ‘¨â€ğŸ« Lembre-se de me marcar em sua publicaÃ§Ã£o. [Aqui estÃ¡ meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Com os _step definitions_ prontos, [vamos aprender como usar a palavra-chave _Background_ da linguagem _Gherkin_](./8.md).

___

[Voltar para a pÃ¡gina inicial](../README.md)