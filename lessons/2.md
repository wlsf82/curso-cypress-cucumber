# Criando o primeiro _Step Definition_

Por padrÃ£o, o Cypress nÃ£o sabe "falar" em _Gherkin_, portanto, Ã© necessÃ¡rio mapear os arquivos de _feature_ para cÃ³digo que o Cypress entenda.

O mapeamento da linguagem natural escrita nos arquivos `.feature` para comandos nativos do Cypress Ã© feita por arquivos chamados de _step definitions_.

Usando o exemplo da aula anterior, terÃ­amos algo como o seguinte.

```js
// cypress/e2e/login.js

import { Given, When, Then } from '@badeball/cypress-cucumber-preprocessor'

Given('I access the Login form', () => {
  cy.visit('https://example.com/login')
})

When('I submit it with valid credentials', () => {
  cy.get('input[name="username"]').type('username-here')
  cy.get('input[name="password"]').type('secret-password-here', { log: false })
  cy.contains('button', 'Login').click()
})

Then('I see the logged-in features available', () => {
  cy.contains('h1', 'Dashboard').should('be.visible')
  cy.get('[data-testid="avatar"]').should('be.visible')
})
```

> ğŸ‘¨â€ğŸ« Ou seja, primeiro importamos do pacote `@badeball/cypress-cucumber-preprocessor` as funcÃµes `Given`, `When` e `Then`.
>
> EntÃ£o, usamos tais funÃ§Ãµes para mapear os texto que vem apÃ³s as palavras-chave `Given`,`When`, `Then`.
>
> Cada uma dessas funÃ§Ãµes recebe como primeiro argumento uma string (ex.: `'I access the Login form'`), e como segundo argumento, uma funÃ§Ã£o de _callback_.
>
> Por fim, comandos nativos do Cypress implementam o que o _step_ descreve no corpo da funÃ§Ã£o de _callback_ (ex.: `cy.visit('https://example.com/login')`).

## ExercÃ­cio ğŸ¯

1. Dentro da pasta `cypress/e2e/engagesphere/cookies/` crie um arquivo chamado `cookies.js`
2. Mapeie cada passo do arquivo `cypress/e2e/engagesphere/cookies/cookies.feature` no arquivo `cypress/e2e/engagesphere/cookies/cookies.js` utilizando as funÃ§Ãµes `Given`, `When`, `Then`, conforme explicado acima
3. Por fim, execute os testes e siga adiante quando os mesmos estiverem passando.

## Mostre ao mundo o que vocÃª aprendeu ğŸŒ

Para mostrar Ã  sua rede profissional o que vocÃª aprendeu nesta aula, publique o seguinte no LinkedIn.

> Estou fazendo o curso "Testes End-to-End com Cypress e Cucumber: Guia Definitivo ğŸ¥’" da escola online Talking About Testing, onde aprendi como mapear linguagem natural que utiliza as palavras-chave `Given`, `When`, `Then` para comandos nativos do Cypress (_step definitions_). #TalkingAboutTesting #EscolaTAT #Cypress #Cucumber
>
> ğŸ‘¨â€ğŸ« Lembre-se de me marcar em sua publicaÃ§Ã£o. [Aqui estÃ¡ meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Com os _step definitions_ prontos, [vamos criar um arquivo de _feature_ que possa receber parÃ¢metros](./3.md).

___

[Voltar para a pÃ¡gina inicial](../README.md)