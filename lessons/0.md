# Fork e clone do projeto ğŸ‘

1. Abra o navegador e visite a URL <https://github.com/wlsf82/curso-cypress-cucumber>.
2. FaÃ§a um [fork]((https://docs.github.com/pt/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo)) do projeto.

> ğŸ‘¨â€ğŸ« Ã‰ importante que vocÃª trabalhe em seu fork, para que ao final do curso, vocÃª possa executar os testes em um _workflow_ de integraÃ§Ã£o contÃ­nua.

3. Em seu fork, clique no botÃ£o **Code**, escolha a opÃ§Ã£o _clone via SSH_ e copie o link de clone do projeto.

> Para obter detalhes sobre como clonar um projeto do GitHub, leia a [documentaÃ§Ã£o oficial](https://docs.github.com/pt/repositories/creating-and-managing-repositories/cloning-a-repository).
>
> Para obter detalhes sobre como criar e configurar uma chave SSH no GitHub, leia a [documentaÃ§Ã£o oficial](https://docs.github.com/pt/authentication/connecting-to-github-with-ssh/about-ssh).

4. Em seu terminal de linha de comando (em uma pasta onde vocÃª armazena seus projetos de software), execute o comando `git clone [cole-o-link-copiado-aqui]`.

> ğŸ‘¨â€ğŸ« Para garantir que vocÃª estÃ¡ clonando o seu fork, verifique seu nome de usuÃ¡rio do GitHub na URL de clone do projeto. Deve ser semelhante a `git@github.com:[seu-nome-de-usuÃ¡rio-aqui]/curso-cypress-cucumber.git`.

5. ApÃ³s clonar o projeto, acesse o diretÃ³rio recÃ©m-clonado (`cd curso-cypress-cucumber/`).

> **Obs.:** Dentro do diretÃ³rio `curso-cypress-cucumber/`, vocÃª deve ter os subdiretÃ³rios `.git/` (diretÃ³rio oculto) e `lessons/`, e os arquivos `.gitignore` (arquivo oculto), `LICENSE`, `package.json` e `README.md`.

## InstalaÃ§Ã£o e inicializaÃ§Ã£o do [Cypress](https://cypress.io) ğŸŒ²

1. Na raiz do projeto, execute o comando `npm install cypress@15.3.0 --save-dev` (ou `npm i cypress@15.3.0 -D` para a versÃ£o curta).
2. Execute o comando `npx cypress open` para abrir o Cypress pela primeira vez e deixe-o guiÃ¡-lo na criaÃ§Ã£o de uma suite de testes de ponta a ponta (E2E).
3. AtravÃ©s da _Cypress App_, crie um teste padrÃ£o, sÃ³ para testar que tudo estÃ¡ funcionando (depois de testar, pode deletar o arquivo `cypress/e2e/spec.cy.js`).
4. Por fim, delete a pasta `cypress/fixtures/` visto que nÃ£o a utilizaremos durante o curso.

> ğŸ‘¨â€ğŸ« Em seguida, iremos configurar o Cypress para ignorar a pasta `cypress/fixtures/`.

> **Obs. 2:** Quando iniciado pela primeira vez, o Cypress cria automaticamente o arquivo `cypress.config.js` e o diretÃ³rio `cypress/`, com os subdiretÃ³rios `e2e/`, `fixtures/` e `support/`, com seus respectivos arquivos.
>
> ğŸ‘¨â€ğŸ« Ã‰ importante instalar a exata versÃ£o do Cypress descrita acima (`15.3.0`) para nÃ£o ter problemas de incompatibilidade.
>
> Para aprender mais sobre o Cypress, confira sua [documentaÃ§Ã£o oficial](https://docs.cypress.io/).

## InstalaÃ§Ã£o e configuraÃ§Ã£o do plugin do Cucumber para Cypress. ğŸ¥’

1. Na raiz do projeto, execute o comando `npm install @badeball/cypress-cucumber-preprocessor@23.0.0 @bahmutov/cypress-esbuild-preprocessor@2.2.5 --save-dev` (ou `npm i  @badeball/cypress-cucumber-preprocessor@23.0.0 @bahmutov/cypress-esbuild-preprocessor@2.2.5 -D` para a versÃ£o curta).
2. ApÃ³s a instalaÃ§Ã£o desses pacotes, vocÃª precisa configurar o Cypress para usar os plugins. Portanto, copie e cole o cÃ³digo abaixo em seu arquivo `cypress.config.js`.

```js
import { defineConfig } from 'cypress'
import createBundler from '@bahmutov/cypress-esbuild-preprocessor'
import { addCucumberPreprocessorPlugin } from '@badeball/cypress-cucumber-preprocessor'
import createEsbuildPlugin from '@badeball/cypress-cucumber-preprocessor/esbuild'

export default defineConfig({
  e2e: {
    fixturesFolder: false,
    specPattern: 'cypress/e2e/**/*.feature',
    async setupNodeEvents(on, config) {
      await addCucumberPreprocessorPlugin(on, config)
      on('file:preprocessor', createBundler({
        plugins: [createEsbuildPlugin(config)],
      }))

      return config
    },
  },
})

```

> ğŸ‘¨â€ğŸ« O atributo `specPattern` informa ao Cypress que queremos procurar por arquivos `.feature` na pasta `e2e/`. Isso significa que ele ignorarÃ¡ todos os outros formatos e usarÃ¡ apenas arquivos `.feature` como testes.
>
> A funÃ§Ã£o `addCucumberPreprocessorPlugin()` se encarrega de processar esses arquivos `.feature` e convertÃª-los para Javascript. Como o Cypress roda no navegador, precisamos garantir que tudo o que executamos (sejam arquivos .ts, .jsx ou outros formatos) seja eventualmente compilado em Javascript puro. Ã‰ isso que os prÃ©-processadores fazem.
>
> O `on("file:preprocessor")` se encarrega de combinar o plugin `esbuild` com o plugin `cucumber` para que funcionem juntos.
>
> A instruÃ§Ã£o de configuraÃ§Ã£o `return` final garante que tudo o que configuramos serÃ¡ realmente definido em nossa configuraÃ§Ã£o. Esta etapa Ã© frequentemente esquecida, portanto, se seus plugins se comportarem como se nÃ£o estivessem instalados, verifique a instruÃ§Ã£o `return`.

## _npm scripts_

Por fim, atualize a seÃ§Ã£o de scripts do arquivo `package.json` conforme abaixo.

```json
"scripts": {
  "cy:open": "cypress open",
  "test": "cypress run"
},
```

> ğŸ‘¨â€ğŸ« O primeiro script abre a _Cypress App_ para execuÃ§Ã£o dos testes em modo interativo, e o segundo, executa todos os testes em modo _headless_.

___

ParabÃ©ns! [Vamos para a aula 1 escrever nosso primeiro arquivo de _feature_](./1.md).

___

[Voltar para a pÃ¡gina inicial](../README.md)
